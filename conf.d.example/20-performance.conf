# Runtime tuning for API-heavy forward proxy traffic.
cache_mem 512 MB
maximum_object_size_in_memory 1024 KB

# Safe presets:
# 1) SMP preset (recommended for API/CONNECT proxy):
#    workers 2
#    # cache_dir ufs /var/spool/squid 2048 16 256
# 2) Disk-cache preset (single worker):
#    workers 1
#    cache_dir ufs /var/spool/squid 2048 16 256

# Disable on-disk cache for SMP mode in this setup.
# Reason: shared UFS cache_dir with workers >1 may trigger worker assertion/restart loops.
# cache_dir ufs /var/spool/squid 2048 16 256

# Rule: workers count should not exceed available CPU cores.
# Default is 2 workers for SMP.
pinger_enable off
workers 2

# Fail faster on bad upstream paths and stale DNS.
connect_timeout 15 seconds
dns_timeout 8 seconds
positive_dns_ttl 1 hour
negative_dns_ttl 30 seconds
